function LP(e,t){return"landscape"===ad_orientation?e:t}function noReporting(){for(var e=["getPlayablePreview","in/getPreview"],t=document.location.href,a=0;a<e.length;a++)if(t.indexOf(e[a])>-1)return!0;return!1}function setupIS(){mraid&&(ad_orientation=mraid.getMaxSize().width<mraid.getMaxSize().height?"portrait":"landscape",window.innerWidth=mraid.getMaxSize().width,window.innerHeight=mraid.getMaxSize().height,mraid.addEventListener("sizeChange",function(){window.innerWidth=mraid.getMaxSize().width,window.innerHeight=mraid.getMaxSize().height;var e=document.createEvent("HTMLEvents");e.initEvent("resize",!0,!1),window.dispatchEvent(e)},!0)),0!==window.innerWidth&&"undefined"!=typeof window.innerWidth&&0!==window.innerHeight&&"undefined"!=typeof window.innerHeight||(ad_orientation=0===window.orientation||180===window.orientation?"portrait":"landscape")}function setupMraid(e){0==window.didsetupMraid&&(body_width=document.body.offsetWidth,body_height=document.body.offsetHeight,"none"!=ad_close_position&&mraid.useCustomClose(!0),time_mraid_ready=(new Date).getTime(),genlog_time_since(time_wrapper_start,"time_mraid_ready"),console.log("setupMraid - start"),genlog("setupMraid."+e),registerMraidHandlers(mraid),showAd("setupMraid"),console.log("setupMraid - end"),window.didsetupMraid=!0)}function registerMraidHandlers(e){if(console.log("registerMraidHandlers - start"),e.setOrientationProperties&&"adcolony"!==ad_exchange&&"applovin_nonrtb"!==ad_exchange&&"ironsource_nonrtb"!==ad_exchange?e.setOrientationProperties({allowOrientationChange:!1,forceOrientation:ad_orientation}):e.setOrientationProperties&&"applovin_nonrtb"===ad_exchange&&window.applovinMraid&&applovinMraid.setOrientationProperties({allowOrientationChange:!0,forceOrientation:"none"}),e.isViewable()||e.addEventListener("viewableChange",function(t){console.log("viewable changed to: "+t+" ("+typeof t+")"),genlog("mraid_viewable_change_"+t),e.isViewable()&&(e.removeEventListener("viewableChange",arguments.callee),console.log("showAd (viewable listener): calling"),showAd("mraid viewableChange"))}),"adcolony_nonrtb"===ad_exchange&&"function"==typeof e.preloadStore){var t=window.adcolony_sdk_settings_object?window.adcolony_sdk_settings_object.install_url:ad_click_dest;e.preloadStore(t)}e.addEventListener("error",function(e,t){console.log("mraid error.  message: "+e+"   action: "+t),log_remote("mraid_error","message: "+e+"   action: "+t)}),e.addEventListener("stateChange",function(e){if(genlog("mraid_state_change_"+e),"expanded"===e&&"adex"!==ad_exchange)return genlog("mraid_state_change_"+e+"_avert"),!1;switch(e){case"hidden":break;case"expanded":"adex"===ad_exchange?showAd("expanded: adex"):(console.log("Toggle to: Expanded"),wrapper_toggle_layer("ad_banner","ad_expanded"),showAd("expanded"));break;case"default":console.log("Toggle to: Default"),wrapper_toggle_layer("ad_expanded","ad_banner")}}),isPostitial()&&e.addEventListener("applovinPostitialChange",function(e){ad_state="ready"}),console.log("registerMraidHandlers - end")}function wrapper_click_go(e,t){if(genlog("click_go"),("undefined"==typeof t||isObject(t))&&(t="cta"),"tapjoy"===ad_exchange)window.TJ_API&&window.TJ_API.click();else if("vungle"===ad_exchange)window.parent&&window.parent.postMessage("download","*");else if("facebook"===ad_exchange)"undefined"!=typeof FbPlayableAd&&FbPlayableAd.onCTAClick();else if("adcolony"===ad_exchange){var a=window.adcolony_sdk_settings_object?window.adcolony_sdk_settings_object.install_url:ad_click_dest;mraid.open(a)}else if("adcolony_nonrtb"===ad_exchange){var a=window.adcolony_sdk_settings_object?window.adcolony_sdk_settings_object.install_url:ad_click_dest;"undefined"!=typeof mraid&&"function"==typeof mraid.openStore?mraid.openStore(a):mraid.open(a)}else if("ironsource_nonrtb"===ad_exchange)"undefined"!=typeof dapi&&"function"==typeof dapi.openStoreUrl&&dapi.openStoreUrl();else if("demo"===ad_exchange||"undefined"!=typeof ad_demo&&ad_demo)console.log("CrossInstall Demo");else if("preview"===ad_exchange||"web_browser"===ad_exchange)window.open(ad_click_dest,"_parent");else if("nomraid"===ad_exchange||"snapchat"===ad_exchange||query_params.dev_nomraid)window.location.href=ad_click_dest;else if("adwords"===ad_exchange)ExitApi.exit();else{var a=ad_click_dest,n=a.indexOf("?")===-1?"?sub12=":"&sub12=";"adex"==ad_exchange&&(n=encodeURIComponent(n)),a+=n+t,e&&!isObject(e)&&(a+="."+e.toString()),localization&&(a+="&lang="+localization.getLanguage()),console.log("clicked; going to click destination: "+a),mraid.open(a)}}function isObject(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function showCloseButtonCountdown(){if(!close_button_showing&&"none"!=ad_close_position){var e=close_button_time_remaining/1e3,t=document.getElementById("close_timer");t&&(t.innerHTML=e);var a=document.createAttribute("style");a.value="display:block",t&&t.setAttributeNode(a),close_button_time_remaining-=1e3,close_button_time_remaining>0&&setTimeout(function(){showCloseButtonCountdown()},1e3)}}function showCloseButton(){if("none"!=ad_close_position){genlog("show_close_button");var e=document.getElementById("close_timer"),t=document.createAttribute("style");t.value="display:none",e.setAttributeNode(t);var a=document.getElementById("close_zone"),n=document.createAttribute("style");n.value="display:block",a.setAttributeNode(n),a.onclick=function(){if(genlog("close"),isMraid())mraid.close();else if("vungle"===ad_exchange)window.callSDK&&window.callSDK("close");else for(;document.body.hasChildNodes();)document.body.removeChild(document.body.firstChild);return!1},close_button_showing=!0}}function showAd(e){if(console.log("showAd ",e),!ad_expandable||force_full){if(console.log("showAd - full"),(!isMraid()||mraid.isViewable()||"adcolony"===ad_exchange||"adcolony_nonrtb"===ad_exchange)&&0==window.adDidShowViewable){time_mraid_viewable=(new Date).getTime(),analytics.markViewable(),isMraid()&&genlog_time_since(time_mraid_ready,"time_mraid_viewable"),console.log("showAd - viewable"),genlog("viewable");var t=document.getElementById("ad");if(t){console.log("has ad div; setting style display:block");var a=document.createAttribute("style");a.value="display:block",t.setAttributeNode(a)}if(fire_tracking_pixels(),analytics.doorbell(),wrapper_splash_shadows_start(),setTimeout(function(){showCloseButton()},ad_close_duration),close_button_timeout_id=setTimeout(function(){showCloseButton()},ad_close_duration),ad_close_countdown&&(close_button_time_remaining=ad_close_duration,showCloseButtonCountdown()),"ready"!==ad_state){try{console.log("ad_begin: calling"),ad_begin()}catch(n){}ad_state=isPostitial()?ad_state:"ready"}analytics.logEvent("lang",localization.getLanguage(),"wrapper"),window.adDidShowViewable=!0}"tapjoy"===ad_exchange&&window.TJ_API&&window.TJ_API.setPlayableBuild({orientation:ad_orientation,buildID:getBuildVersion()})}}function fire_tracking_pixels(){try{ad_tracking_pixels.forEach(function(e){var t=new XMLHttpRequest;t.open("GET",e),t.send()})}catch(e){console.log("Error: problem parsing var ad_tracking_pixels")}}function wrapper_preload_complete(){time_app_preload_complete=(new Date).getTime(),genlog_time_since(time_wrapper_start,"time_app_preload")}function wrapper_load_progress(e){var t=document.getElementById("splash_loading_bar")||document.getElementById("splash_loading_bar_full");if(t){var a=document.createAttribute("style");a.value="width:"+Math.floor(135*e/100)+"px",t.setAttributeNode(a),t.style.width=Math.floor(133*e/100)+"px"}}function wrapper_hide_splash(){if(fitTitle(),null===time_app_start){wrapper_load_progress(100);var e;time_app_start=(new Date).getTime(),analytics.markAppStart(),genlog_time_since(time_mraid_viewable,"time_app_start"),genlog("hide_splash");var t=document.getElementById("splash");t&&(e=document.createAttribute("style"),e.value="display:none",t.setAttributeNode(e));var a=document.getElementById("ad_header_logo");a&&(e=document.createAttribute("style"),e.value="display:block",a.setAttributeNode(e)),console.log("close duration:",ad_close_duration),close_button_timeout_id&&(clearTimeout(close_button_timeout_id),close_button_timeout_id=null),isSplashHidden=!0,wrapper_cleanup()}applySafeAreas()}function wrapper_cleanup(){var e=document.getElementById("splash");e&&(e.parentNode.removeChild(e),console.log("wrapper - cleanup"))}function wrapper_mark_interaction(){return analytics.profileEnhanceInteraction(),analytics.countEvent("interactions",1),hadFirstInteraction?hadSecondInteraction?hadThirdInteraction?void 0:(genlog("third_interaction","action"),void(hadThirdInteraction=!0)):(genlog("second_interaction","action"),void(hadSecondInteraction=!0)):(genlog("first_interaction","action"),void(hadFirstInteraction=!0))}function wrapper_mark_cta(e){e=e||"unknown","tapjoy"===ad_exchange&&window.TJ_API&&(window.TJ_API.objectiveComplete(),window.TJ_API.gameplayFinished()),analytics.markCTA(e);var t="cta";genlog(t)}function log_remote(e,t){if(console.log("%c[log_remote]  %s ==> %s","background:tan;color:white",e,t),"adwords"!==ad_exchange&&"facebook"!==ad_exchange){var a=ad_name;"undefined"!=typeof ad_creative_id&&(a=ad_creative_id);var n=ad_logroot+"/log_string?bin="+encodeURIComponent(a+"."+e)+"&s="+encodeURIComponent(t),i=new XMLHttpRequest;i.open("GET",n),i.send()}}function genlog(e,t){t=t||"wrapper",analytics.logEvent("funnel",e,t)}function genlog_time_since(e,t,a){if(a=a||"wrapper",e){var n=bucket_time_since(e);analytics.logEvent(t,n,a)}}function bucket_time_since(e,t){t||(t=(new Date).getTime());var a=t-e,n=get_bucket(a,0,1e4,40),i="[";return i+=n.start==Number.NEGATIVE_INFINITY?"-inf":n.start,n.start!=n.end&&(i+=" to ",i+=n.end==Number.POSITIVE_INFINITY?"+inf":n.end),i+="]"}function bucketObj(){this.offset=null,this.start=null,this.end=null,this.width=null}function get_bucket(e,t,a,n){var i=new bucketObj;if(i.width=(a-t)/n,e<=t||a==t)i.offset=0,i.start=Number.NEGATIVE_INFINITY,i.end=t+i.width;else if(e>=a)i.offset=n-1,i.start=a-i.width,i.end=Number.POSITIVE_INFINITY;else{var o=n*(e-t)/(a-t),r=Math.floor(o);i.offset=Math.round(r),i.start=t+i.offset*i.width,i.end=i.start+i.width}return 0===i.offset&&(i.start=Number.NEGATIVE_INFINITY),i.offset==n-1&&(i.end=Number.POSITIVE_INFINITY),i}function getAdvertisingLabel(){return""!==ad_advertising_label_lang?" - "+advertisingLabels[ad_advertising_label_lang]:""}function overrideAgeRating(e){e&&!imageLoader.isInline()&&(ad_show_age_ratings=e.replace("+","")+"+")}function getAgeRatingMarkup(){var e="";return""===ad_show_age_ratings?e:e=imageLoader.isInline()||utils.hasAbsoluteCSS()?'<div class="ageRatingIcon"></div>':'<img class="ageRatingIcon" src="/global_v2/img/age_ratings/'+ageRatingImages[ad_show_age_ratings]+'"/>'}function getBuildVersion(){return"undefined"==typeof ad_hash?"v0.0.1":ad_hash}function getUserAgent(){return window.navigator&&window.navigator.userAgent?window.navigator.userAgent:"unknown"}function getDeviceSize(){return window.screen?{width:window.screen.width,height:window.screen.height}:"unknown"}function getDeviceId(){return"undefined"==typeof ad_device_id?"":ad_device_id}function getAuctionId(){return"undefined"!=typeof ad_auction_id&&ad_auction_id||(ad_auction_id="ntwk_"+generateId(27)),ad_auction_id}function generateId(e){for(var t=[],a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t.push(a.charAt(Math.floor(Math.random()*a.length)));return t.join("")}function isMraid(){return!(no_mraid_partners.indexOf(ad_exchange)>-1||query_params.dev_nomraid)}function isPostitial(){try{return mraid.EVENTS.APPLOVINPOSTITIALCHANGE}catch(e){return!1}}function getPartnerHosts(){return"undefined"==typeof ad_partner_hosts?[]:ad_partner_hosts}function wrapper_splash_shadows_start(){var e=document.getElementById("splash");if(e){for(var t=0;t<bgNumShadows;t++){var a=document.createElement("div");a.id="bgShadow"+t;var n=50+t*Math.floor(150/bgNumShadows);a.style.width=n+"px",a.style.height=Math.floor(n/5)+"px";var i=3*Math.floor((200-n)/20)+1;10==i&&(i="A"),11==i&&(i="B"),12==i&&(i="C"),13==i&&(i="D"),14==i&&(i="E"),15==i&&(i="F"),i>15&&(i="E"),a.className="bg-shadow",a.style.background="#2"+i+"2"+i+"2"+i,a.style.borderRadius=Math.floor(n/2)+"px",a.style.position="absolute",a.style.zIndex=1,void 0!==body_width&&void 0!==body_height?(a.style.left=-100+Math.floor(Math.random()*(body_width+1))+"px",a.style.top=50+Math.floor(Math.random()*(body_height+1))+"px"):(a.style.left=-100+Math.floor(Math.random()*(gameWidth+1))+"px",a.style.top=50+Math.floor(Math.random()*(gameHeight+1))+"px"),e.insertBefore(a,e.firstChild)}setTimeout(wrapper_splash_shadows_move,20)}}function wrapper_splash_shadows_move(){if(!isSplashHidden){for(var e=0;e<bgNumShadows;e++){var t=document.getElementById("bgShadow"+e),a=parseInt(t.style.left),n=parseInt(t.style.width);a+=Math.floor((200-n)/15)+1,a>body_width+200&&(a=-200),t.style.left=a+"px"}setTimeout(wrapper_splash_shadows_move,20)}}function fitTitle(){var e=document.getElementById("ad_title");if(e){var t=e.clientHeight,a=document.createAttribute("style");for(a.value="font-size: "+t+"px;line-height: "+t+"px;padding-left:"+title_pad_left+"px;padding-right:"+title_pad_right+"px",e.setAttributeNode(a);e.scrollHeight!==e.clientHeight;)t-=1,a.value="font-size: "+t+"px;line-height: "+t+"px;padding-left:"+title_pad_left+"px;padding-right:"+title_pad_right+"px",e.setAttributeNode(a)}}function wrapper_expand(){genlog("wrapper_expanded"),mraid.expand()}function wrapper_toggle_layer(e,t){var a=document.getElementById(e);a&&(a.style.display="none");var n=document.getElementById(t);n&&(n.style.display="")}function updateNotchPos(){var e=document.createElement("div");CSS.supports("padding-top: env(safe-area-inset-top)")?(e.style.paddingLeft="env(safe-area-inset-left)",e.style.paddingTop="env(safe-area-inset-top)",e.style.paddingBottom="env(safe-area-inset-bottom)"):CSS.supports("padding-top: constant(safe-area-inset-top)")?(e.style.paddingLeft="constant(safe-area-inset-left)",e.style.paddingTop="constant(safe-area-inset-top)",e.style.paddingBottom="constant(safe-area-inset-bottom)"):e.style.paddingTop=e.style.paddingLeft="0px",document.body.appendChild(e),calculatedPaddingLeft=parseInt(window.getComputedStyle(e).paddingLeft),calculatedPaddingTop=parseInt(window.getComputedStyle(e).paddingTop),calculatedPaddingBottom=parseInt(window.getComputedStyle(e).paddingBottom),document.body.removeChild(e),ad_notch_top=calculatedPaddingTop>0,ad_notch_bottom=calculatedPaddingBottom>0,ad_notch_sides=calculatedPaddingLeft>0}function applySafeAreas(){var e=document.getElementById("ad_header_logo"),t=document.getElementById("ad_title"),a=document.getElementById("close_zone"),n=document.getElementById("close_timer");updateNotchPos(),ad_notch_top||ad_notch_sides?(useSafeAreaClass(e),useSafeAreaClass(t),useSafeAreaClass(a),useSafeAreaClass(n),ad_notch_sides&&t&&(t.className="ad_title")):(t&&(t.className="ad_title"),a&&(a.className=a.className.replace("_safe_area","")),n&&(n.className=n.className.replace("_safe_area",""))),fitTitle(),window.addEventListener("resize",function i(e){applySafeAreas(),e.currentTarget.removeEventListener(e.type,i)})}function useSafeAreaClass(e){e&&(e.className=e.className.replace("_safe_area",""),e.className+="_safe_area")}var Localization=function(){};Localization.prototype.init=function(){this._strings=[],this._language=null,navigator&&navigator.userAgent&&(this._language=navigator.userAgent.match(/android.*\W(\w\w)-(\w\w)\W/i))&&(this._language=this._language[1]),!this._language&&navigator&&(navigator.languages?this._language=navigator.languages[0]:navigator.language?this._language=navigator.language:navigator.browserLanguage?this._language=navigator.browserLanguage:navigator.systemLanguage?this._language=navigator.systemLanguage:navigator.userLanguage&&(this._language=navigator.userLanguage),this._language&&(this._language=this._language.toLowerCase())),this._language||(this._language="en"),console.log("Language: "+this._language)},Localization.prototype.registerString=function(e,t){console.log("localization: registering string:",e),this._strings[e]=t},Localization.prototype.registerStrings=function(e){for(var t in e)this.registerString(t,e[t])},Localization.prototype.getLanguage=function(){return this._language},Localization.prototype.setLanguage=function(e){this._language=e?e.toString():this._language},Localization.prototype.get=function(e,t){var a=this._language?this._language.substr(0,2):null,n=this._strings[e]&&this._strings[e].en||e;if(this._strings[e]&&this._strings[e][this._language]?n=this._strings[e][this._language]:this._strings[e]&&"undefined"!=typeof this._strings[e][a]&&(n=""!==this._strings[e][a]?this._strings[e][a]:this._strings[e].en),t)for(var i in t)n=n.replace(i,t[i]);return n},Localization.prototype.parseRegisteredStrings=function(){this._localized=!1,this._localizedForRegion=!1;for(var e in this._strings){if(e.indexOf("Mini game loading")>-1)break;"undefined"!=typeof this._strings[e][this._language.substr(0,2)]&&(this._localized=!0),"undefined"!=typeof this._strings[e][this.getLanguage()]&&(this._localizedForRegion=!0)}},Localization.prototype.isLocalized=function(){return"undefined"==typeof this._localized&&this.parseRegisteredStrings(),this._localized},Localization.prototype.isLocalizedForRegion=function(){return"undefined"==typeof this._localizedForRegion&&this.parseRegisteredStrings(),this._localizedForRegion},Localization.prototype.fitText=function(e,t,a){if(e.defaultFontSize||(e.defaultFontSize=e.fontSize.replace(/\D/g,"")),e.fontSize=e.defaultFontSize+"pt",e.wordWrap&&(t=e.wordWrapWidth),t>0&&a>0)for(var n=e.defaultFontSize;(e.width>t||e.height>a)&&n>4;)n-=1,e.fontSize=n+"pt"};var localization=new Localization;localization.init();var Utils=function(){};Utils.prototype.getAdParameters=function(e){var t={},a=window.location.href.indexOf("?")+1;if(a>0){var n=[];window.location.href.slice(a).split("&").forEach(function(a){key=a.substring(0,a.indexOf("=")),key.match(/_override/)&&(t[key]=decodeURIComponent(a.split("=")[1])),e[key]&&n.push(a)}),""===ad_dynamic_parameters?ad_dynamic_parameters=n.join("&"):ad_dynamic_parameters+"&"+n.join("&")}if(ad_dynamic_parameters&&ad_dynamic_parameters.split("&").forEach(function(e){t[e.split("=")[0]]=decodeURIComponent(e.split("=")[1])}),e){var i=null;for(i in t)if("undefined"!=typeof e[i])switch(e[i].type.toLowerCase()){case"int":case"integer":t[i]=parseInt(t[i]),Array.isArray(e[i].range)&&"cta_on_idle_time"!==i&&(isNaN(t[i])||t[i]<e[i].range[0]||t[i]>e[i].range[1])&&"undefined"!=typeof e[i]["default"]&&(t[i]=e[i]["default"]);break;case"int[]":case"integer[]":for(var o=t[i].split(","),r=0;r<o.length;r++)o[r]=+o[r];t[i]=o;break;case"float":t[i]=parseFloat(t[i]),Array.isArray(e[i].range)&&(isNaN(t[i])||t[i]<e[i].range[0]||t[i]>e[i].range[1])&&"undefined"!=typeof e[i]["default"]&&(t[i]=e[i]["default"]);break;case"bool":case"boolean":"true"===t[i].toLowerCase()?t[i]=!0:"false"===t[i].toLowerCase()?t[i]=!1:"undefined"!=typeof e[i]["default"]&&(t[i]=e[i]["default"])}for(i in e)"undefined"==typeof t[i]&&"undefined"!=typeof e[i]["default"]&&(t[i]=e[i]["default"])}return Utils.params=t,Utils.specs=e,analytics.setSampleRate(t.analytics_override),localization.setLanguage(t.language_override),overrideAgeRating(t.age_override),t},Utils.prototype.getAdParameterSpec=function(e,t){if(Utils.specs[e])switch(t){case"range":return Utils.specs[e].range;case"type":return Utils.specs[e].type;case"description":return Utils.specs[e].description;default:return"Bad spec"}},Utils.prototype.getTimeSeriesData=function(){var e={};if("undefined"==typeof ad_time_series)return e;ad_time_series=decodeURIComponent(ad_time_series);var t=atob(ad_time_series);return t&&t.split("&").forEach(function(t){e[t.split("=")[0]]=decodeURIComponent(t.split("=")[1])}),e},Utils.prototype.convertType=function(e,t){return"boolean"==typeof e?"true"==t||"1"==t:"number"==typeof e?parseFloat(t):t},Utils.prototype.checkOverlap=function(e,t){var a=e.getBounds(),n=t.getBounds();return Phaser.Rectangle.intersects(a,n)},Utils.prototype.checkPointInside=function(e,t){var a=new PIXI.Rectangle(e.x,e.y,1,1),n=t.getBounds();return Phaser.Rectangle.intersects(a,n)},Utils.prototype.lineLength=function(e,t,a,n){var i=Math.abs(a-e),o=Math.abs(n-t);return Math.sqrt(i*i+o*o)},Utils.prototype.highlightRegion=function(e,t,a,n,i){i=i||.4;var o=null;imageLoader.hasFrameName("mask.png")?o=!1:imageLoader.hasFrameName("mask_small.png")&&(o=!0);var r=imageLoader.sprite(t,a,o?"mask_small.png":"mask.png");r.alpha=i,r.anchor.set(.5,.5);var s=n/20;return o&&(s*=2),r.scale.setTo(s,s),r},Utils.prototype.random=function(e,t){return null===t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},Utils.prototype.shuffle=function(e){for(var t,a,n=0,i=[],o=e.length-1;o>=0;o--)a=e[o],t=this.random(n++),i[n-1]=i[t],i[t]=a;return i},Utils.prototype.arrayDistinct=function(e,t){var a=[];return t.forEach(function(t){e.indexOf(t)==-1&&a.push(t)}),a},Utils.prototype.forceOrientation=function(e,t){if(!e.device.desktop){console.log("forcing orientation: "+t),e.scale.forceOrientation("landscape"==t,"landscape"!=t);var a=this;e.scale.enterIncorrectOrientation.add(function(){a.handleIncorrectOrientation(e)}),e.scale.leaveIncorrectOrientation.add(function(){a.handleCorrectOrientation(e)})}},Utils.prototype.handleIncorrectOrientation=function(e){console.log("entered incorrect orientation"),document.getElementById("orientation").style.display="block"},Utils.prototype.handleCorrectOrientation=function(){console.log("resumed correct orientation"),document.getElementById("orientation").style.display="none"},Utils.prototype.parseXML=function(e){if("undefined"!=typeof window.DOMParser)return(new window.DOMParser).parseFromString(e,"text/xml");if("undefined"!=typeof window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")){var t=new window.ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t}return null},Utils.prototype.applyAdParameters=function(e){var t=utils.getAdParameters();for(var a in t){var n=t[a],i=e;i=a==a.toUpperCase()?window:e,i.hasOwnProperty(a)?"boolean"==typeof i[a]?i[a]="true"==n||"1"==n:i[a]=n:console.log("Ad params: unable to find property:",a)}},Object.prototype.hasOwnProperty=function(e){return"undefined"!=typeof this[e]},String.prototype.lpad=function(e,t){for(var a=this;a.length<t;)a=e+a;return a},String.prototype.isUpperCase=function(e){return e==e.toUpperCase()},Utils.prototype.hasAbsoluteCSS=function(){for(var e=document.styleSheets.length-1;e>=0;e--)if(document.styleSheets[e].href.indexOf("wrapper_abs")>-1)return!0;return!1},Utils.prototype.lerp=function(e,t,a){return e+a*(t-e)},Utils.prototype.hermite=function(e,t,a){return this.lerp(e,t,a*a*(3-2*a))},Utils.prototype.sinerp=function(e,t,a){return this.lerp(e,t,Math.sin(a*Math.PI*.5))},Number.prototype.mod=function(e){return(this%e+e)%e};var utils=new Utils,embedded={},ImageLoader=function(){};ImageLoader.prototype.registerGame=function(e){this._game=e,this._game.load.crossOrigin="anonymous",ImageLoader.prototype.isInline()&&(this._game.load.enableParallel=!1),console.log("load.crossOrigin: ",this._game.load.crossOrigin)},ImageLoader.prototype.isInline=function(){return"undefined"!=typeof ad_inlined_images},ImageLoader.prototype.getInline=function(e){if(!this.isInline())return ImageLoader.prototype.convertPath(e);var t=e.split("/"),a=t[t.length-1];return ad_inlined_images[a]},ImageLoader.prototype.getIcon=function(){if(!ImageLoader.prototype.isInline())return ad_splash_image;try{return ImageLoader.prototype.inlineURLtoImage(ad_splash_image)}catch(e){return ad_splash_image}},ImageLoader.prototype.convertPath=function(e){if("chartboost"===ad_exchange&&e&&e.toLowerCase().indexOf(".json")===-1){if(e&&e.indexOf("images/crossinstall_"+ad_name)===-1){var t=e.split("/");e="images/crossinstall_"+ad_name+"_"+t[t.length-1]}}else if("adwords"===ad_exchange||"googleinstant_nonrtb"===ad_exchange){if(e&&1===e.indexOf(ad_exchange)){var t=e.split(ad_exchange+"/");e=t[1]}else if(e&&1===e.indexOf(ad_name+"/")){var t=e.split(ad_name+"/");e=t[1]}}else if(e&&"vungle"===ad_exchange){var t=e.split("/");e=t[t.length-1]}else if("undefined"!=typeof ad_hash&&""!==ad_hash&&e&&e.indexOf(ad_hash+"/")===-1){var t=e.split("/"+ad_name+"/");e=t[0]+"/"+ad_name+ad_hash+"/"+t[1]}return e},ImageLoader.prototype.registerBackgroundImage=function(e,t,a){var n={url:ImageLoader.prototype.convertPath(e),width:t,height:a,landscape:t>a};this._backgrounds.push(n)},ImageLoader.prototype.preloadBackground=function(){var e=!1;this._game.width>this._game.height&&(e=!0),this._backgrounds=Phaser.ArrayUtils.shuffle(this._backgrounds);for(var t=0;t<this._backgrounds.length;t++)if(e==this._backgrounds[t].landscape)return console.log("Preloading background: "+this._backgrounds[t].url+"    landscape? "+this._backgrounds[t].landscape),void this.loadImage("background",this._backgrounds[t].url);console.log("No matching background found for preloading")},ImageLoader.prototype.displayBackground=function(){return this._game.add.sprite(0,0,"background")},ImageLoader.prototype.loadImage=function(e,t){if(!ImageLoader.prototype.isInline())return this._game.load.image(e,ImageLoader.prototype.convertPath(t));try{return this._game.load.image(e,this.inlineURLtoImage(t))}catch(a){return this._game.load.image(e,ImageLoader.prototype.getInline(t))}},ImageLoader.prototype.loadBitmapFont=function(e,t,a){a||(a=e.toString());var n,i=null;i=embedded[a].json;try{n=ImageLoader.prototype.inlineURLtoImage(t)}catch(o){n=ImageLoader.prototype.getInline(t)}return this._game.load.bitmapFont(e,n,null,JSON.stringify(i))},ImageLoader.prototype.sprite=function(e,t,a){for(var n=0;n<this._atlases.length;n++){var i=this._game.cache.getFrameByName(this._atlases[n],a);if(void 0!==i&&null!=i)return this._game.add.sprite(e,t,this._atlases[n],a)}return console.log("image_loader: warning: sprite not found in atlases; assuming it was loaded individually: "+a),this._game.add.sprite(e,t,a)},ImageLoader.prototype.spriteMake=function(e,t,a){for(var n=0;n<this._atlases.length;n++){var i=this._game.cache.getFrameByName(this._atlases[n],a);if(void 0!==i&&null!=i)return this._game.make.sprite(e,t,this._atlases[n],a)}return this._game.make.sprite(e,t,a)},ImageLoader.prototype.button=function(e,t,a,n,i){for(var o=0;o<this._atlases.length;o++){var r=this._game.cache.getFrameByName(this._atlases[o],a);if(void 0!==r&&null!=r)return this._game.add.button(e,t,this._atlases[o],n,i,a,a,a)}return console.log("image_loader: warning: button not found in atlases; assuming it was loaded individually: "+a),this._game.add.button(e,t,a,n,i)},ImageLoader.prototype.hasFrameName=function(e){for(var t=0;t<this._atlases.length;t++){var a=this._game.cache.getFrameByName(this._atlases[t],e);if(void 0!==a&&null!=a)return!0}return!1},ImageLoader.prototype.loadSpritesheet=function(e,t,a,n,i){return this._game.load.spritesheet(e,t,a,n,i)},ImageLoader.prototype.loadAtlasHash=function(e,t,a,n){this.loadAtlasArray(e,t,a,n,!0)},ImageLoader.prototype.inlineURLtoImage=function(e){function t(e,t,a){var t=e=e.split("base64,")[1];t=t||"",a=a||512;for(var n=atob(e),i=[],o=0;o<n.length;o+=a){for(var r=n.slice(o,o+a),s=new Array(r.length),d=0;d<r.length;d++)s[d]=r.charCodeAt(d);var l=new Uint8Array(s);i.push(l)}var c=new Blob(i);return c}var a=t(ImageLoader.prototype.getInline(e)),n=URL.createObjectURL(a);return n},ImageLoader.prototype.loadDataURI=function(e,t){return 0===t.indexOf("data:image/")&&this._game.load.image(e,t)},ImageLoader.prototype.loadAtlas=function(e,t){this.loadAtlasArray(e,t,null,embedded[e])},ImageLoader.prototype.loadAtlasArray=function(e,t,a,n,i){var o,r,s=n,d=i?Phaser.Loader.TEXTURE_ATLAS_JSON_HASH:Phaser.Loader.TEXTURE_ATLAS_JSON_ARRAY;try{r=this.inlineURLtoImage(t)}catch(l){r=ImageLoader.prototype.getInline(t)}return this.isInline()&&a&&(s=ImageLoader.prototype.getInline(a),a=null),this._game.load.atlas(e,r,ImageLoader.prototype.convertPath(a),s,d),this._atlases.push(e),o};var spinePlugin=null;ImageLoader.prototype.loadSpine=function(e,t,a,n){spinePlugin||(spinePlugin=this._game.add.plugin(PhaserSpine.SpinePlugin)),game=this._game,this._atlases.indexOf(t)==-1&&imageLoader.loadAtlas(t,a),"string"==typeof e?(e=[e],this._game.load.spine(e,t,a,n)):e.forEach(function(e,i){game.load.spine(e,t,a,n)})};var imageLoader=new ImageLoader;imageLoader._game=null,imageLoader._backgrounds=[],imageLoader._atlases=[],"undefined"!=typeof Phaser&&(Phaser.Cache.prototype.addBitmapFontByAtlas=function(e,t,a,n,i,o){var r={url:null,data:null,font:null,base:this.getBaseTexture(a)};void 0===i&&(i=0),void 0===o&&(o=0),r.font=Phaser.LoaderParser.xmlBitmapFont(t,r.base,i,o),this._cache.bitmapFont[e]=r});var Analytics=function(){};Analytics.prototype.init=function(e){if(this.enabled=!0,this.enabled_profile_enhance=!0,this.sdk_enabled=!1,this.verbose=!1,this.input_handlers_registered=!1,this.swipe_start_position=[0,0],this.counters={},this.prev_counters={},this.times={},this.start_time=(new Date).getTime(),this.markTime("bootup"),this.last_time_send=null,this.time_series_data=utils.getTimeSeriesData(),this.sent_first_interaction=!1,this.state="loading",100*Math.random()<e)switch(ad_exchange){case"adwords":this._consoleLog("analytics are disabled for this run");case"facebook":this.sdk_enabled=!0,this.enabled=!1;break;default:this._consoleLog("analytics are enabled for this run"),this.enabled=!0}else this._consoleLog("analytics are disabled for this run"),this.enabled=!1;if("adwords"===ad_exchange||"facebook"===ad_exchange||""===getDeviceId()?(this._consoleLog("profile enhancement is disabled for this run"),this.enabled_profile_enhance=!1):(this._consoleLog("profile enhancement is enabled for this run"),this.enabled_profile_enhance=!0),this.enabled){var t=this;setInterval(function(){t._intervalEvent()},5e3),this.fps_elapsed=0,this.fps_last=null,function a(){requestAnimationFrame(function(){t._measureFPS(),a()})}()}},Analytics.prototype.initExchangeLogging=function(){if(this.sdk_enabled)switch(ad_exchange){case"facebook":"undefined"!=typeof FbPlayableAd&&"function"==typeof FbPlayableAd.initializeLogging?(this.sdk_enabled="facebook",console.log("%c[fb-analytics] %s","background:#4267b2;color:white","FB analytics are enabled for this run. CI analytics disabled."),FbPlayableAd.initializeLogging("https://facebook.crossinstall.io/events",ad_name+"_"+ad_hash),this.logFacebookEvent("logLevelComplete","funnel","wrapper"),this.logFacebookEvent("logLevelComplete","funnel","viewable"),this.logFacebookEvent("logLevelComplete","lang",localization.getLanguage()),this.logFacebookEvent("logLevelComplete","time_app_preload",bucket_time_since(time_wrapper_start,time_app_preload_complete))):console.log("%c[fb-analytics] %s","background:#b30000;color:white","FbPlayableAd is missing! Disabling analytics.");break;default:this.sdk_enabled=!1}},Analytics.prototype.setSampleRate=function(e){return ad_analytics_sample_rate=e?e:ad_analytics_sample_rate,ad_analytics_sample_rate},Analytics.EventType={time:"time",game_state:"game_state",action:"action",click:"click",wrapper:"wrapper",dev:"dev"},Analytics.prototype.logEvent=function(e,t,a){if(a=a||"",Analytics.EventType.hasOwnProperty(a)||(a="unknown"),this._consoleLog("["+a+" - event] "+e+" ==> "+t),a!==Analytics.EventType.dev){"action"===a||"click"===a||"unknown"===a?this.logFacebookEvent("logButtonClick",e,t):"wrapper"!==a&&"game_state"!==a&&"time"!==a||this.logFacebookEvent("logLevelComplete",e,t);var n={};n.event_name=e,n.event_type=a,n.event_value=t,this._send(n)}},Analytics.prototype.logProgress=function(e,t){t=t||"unknown_state",this.logEvent(e,t,Analytics.EventType.game_state)},Analytics.prototype.logTime=function(e,t){t=t||"unknown_time",this.logEvent(e,t,Analytics.EventType.time)},Analytics.prototype.logClick=function(e,t){t=t||"unknown_source",this.logEvent(e,t,Analytics.EventType.click)},Analytics.prototype.logDev=function(e,t){this.logEvent(e,t,Analytics.EventType.dev)},Analytics.prototype.countEvent=function(e,t){this.counters[e]?this.counters[e]+=t:this.counters[e]=t,
this.verbose&&this._consoleLog("[counter] "+e+" ==> "+this.counters[e]),"interactions"===e&&this.logFacebookEvent("logButtonClick",e,t)},Analytics.prototype.profileEnhanceInteraction=function(){var e=getDeviceId();if(!e||""==e)return void this._consoleLogProfile("interaction - no device id");if(!this.sent_first_interaction){this.sent_first_interaction=!0,this._consoleLogProfile("interaction");var t={};t.feature="interaction",this._sendProfile(t)}},Analytics.prototype.profileEnhanceInterest=function(e){var t=getDeviceId();if(t&&""!=t){this._consoleLogProfile("interest: "+e);var a={};a.feature="interest",a.value=e,this._sendProfile(a)}},Analytics.prototype.logError=function(e){this._consoleLog("[error] "+e);for(var t=[["Can't find variable: mraid",null],["mraid is not defined",null],["mraidbridge is not defined",null],["window.mraidbridge.","ads.mopub.com"],["window.mraidbridge.","is not a function"],["Cannot read property 'type' of undefined",null],["setOrientationProperties",null],["Script error.",null],["Custom close has been disabled",null],["Ad is already closed",null],["null is not an object",null],["ReferenceError: Can't find variable",null],["undefined is not a function",null],["undefined is not an object",null]],a="Other errors",n=0;n<t.length;n++)if(e.indexOf(t[n][0])!=-1&&(!t[n][1]||e.indexOf(t[n][1])!=-1)){a=t[n][0],t[n][1]&&(a+=" ... "+t[n][1]);break}var i={};i.event_name="error",i.event_value=a,this._send(i)},Analytics.prototype.markViewable=function(){this.markTime("viewable")},Analytics.prototype.markAppStart=function(){this.initExchangeLogging(),this.logFacebookEvent("logGameLoad"),this.markTime("app_start"),this.state="playing",this.registerTouchHandlers()},Analytics.prototype.markCTA=function(e){this.markTime("cta"),this.state="cta",this.logProgress("game_over",e),this.logFacebookEvent("logEndCardShowUp")},Analytics.prototype.markTime=function(e){this.times[e]=(new Date).getTime()},Analytics.prototype._intervalEvent=function(){var e={};e.event_name="interval",this._send(e)},Analytics.prototype._consoleLog=function(e){this.enabled?console.log("%c[analytics] "+e,"background:#888800;color:white"):console.log("%c[analytics] "+e,"background:gray;color:white")},Analytics.prototype._consoleLogProfile=function(e){this.enabled_profile_enhance&&console.log("%c[ci-analytics][profile] %s","background:#888800;color:white",e)},Analytics.prototype._measureFPS=function(){var e=(new Date).getTime();this.fps_last?this.fps_elapsed=(e-this.fps_last)/1e3:this.fps_elapsed=0,this.fps_last=e},Analytics.prototype.getFPS=function(){return this.fps_elapsed?Math.round(1/this.fps_elapsed):0},Analytics.prototype.registerTouchHandlers=function(e){0==this.input_handlers_registered&&"undefined"!=typeof window.Phaser&&"undefined"!=typeof window.Phaser.GAMES[0]&&(this.input_handlers_registered=!0,window.Phaser.GAMES[0].input.onTap.add(this.onTap,this),window.Phaser.GAMES[0].input.onDown.add(this.onDown,this),window.Phaser.GAMES[0].input.onUp.add(this.onUp,this))},Analytics.prototype.onTap=function(){this.getPointerPosition();this.countEvent("touches",1)},Analytics.prototype.getPointerPosition=function(){return"undefined"!=typeof window.Phaser&&"undefined"!=typeof window.Phaser.GAMES[0]?[window.Phaser.GAMES[0].input.x,window.Phaser.GAMES[0].input.y]:[0,0]},Analytics.prototype.onDown=function(){this.swipe_start_position=this.getPointerPosition()},Analytics.prototype.onUp=function(){if(0!=this.swipe_start_position[0]||0!=this.swipe_start_position[1]){var e=this.getPointerPosition();utils.lineLength(e[0],e[1],this.swipe_start_position[0],this.swipe_start_position[1])>30&&this.countEvent("swipes",1),this.swipe_start_position=[0,0]}},Analytics.prototype._send=function(e){if(this.enabled&&"localhost"!==document.location.hostname&&"127.0.0.1"!==document.location.hostname){var t=(new Date).getTime();for(var a in this.time_series_data)e[a]=this.time_series_data[a];if(e.name=ad_name,e.creative_id=ad_name,e.close_duration=ad_close_duration,e.close_position=ad_close_position,void 0===typeof n)var n=!0;if(e.close_countdown=n,e.exchange=ad_exchange,e.orientation=ad_orientation,e.version=getBuildVersion(),e.id=getAuctionId(),e.device_id=getDeviceId(),e.l||(e.l=localization.getLanguage()),e.localized=localization.isLocalized(),e.localized_for_region=localization.isLocalizedForRegion(),e.dp||(e.dp=ad_dynamic_parameters.replace(new RegExp("=","g"),":").replace(new RegExp("&","g"),",")),e.wrapper=wrapper_repo,e.renderer_support="unknown",e.renderer="unknown",e.lib="unknown","undefined"!=typeof window.Phaser&&"undefined"!=typeof window.Phaser.GAMES[0])switch(e.lib="phaser",window.Phaser.Device.webGL?e.renderer_support="webgl":window.Phaser.Device.canvas&&(e.renderer_support="canvas"),window.Phaser.GAMES[0].renderType){case window.Phaser.AUTO:e.renderer="auto";break;case window.Phaser.CANVAS:e.renderer="canvas";break;case window.Phaser.WEBGL:e.renderer="webgl";break;case window.Phaser.HEADLESS:e.renderer="headless"}"undefined"!=typeof mraid?(e.mraid=!0,e.mraid_version=mraid.getVersion()):e.mraid=!1,e.fps=this.getFPS(),e.counters={};for(var i in this.counters)this.prev_counters[i]?e.counters[i]=this.counters[i]-this.prev_counters[i]:e.counters[i]=this.counters[i],this.prev_counters[i]=this.counters[i];e.times={};for(var o in this.times)if(!this.last_time_send||this.times[o]>this.last_time_send){var r=this.start_time;switch(o){case"app_start":r=this.times.viewable;break;case"cta":r=this.times.app_start}e.times[o]=this.times[o]-r}e.state=this.state,e.user_agent=getUserAgent(),e.size=getDeviceSize(),this.last_time_send=t;var s=new XMLHttpRequest,d="https://creative-analytics.crossinstall.io/creative";s.open("POST",d),s.setRequestHeader("Content-Type","application/json"),s.send(JSON.stringify(e))}},Analytics.prototype.doorbell=function(){this.ring=function(){if(!query_params.noimp){var e="https://impressions.crossinstall.io/creatives",t=window.location.hostname,a=t.substring(t.lastIndexOf(".",t.lastIndexOf(".")-1)+1);if("localhost"!==a&&"googlesyndication.com"!==a&&"facebook"!==ad_exchange&&"vungle"!==ad_exchange){var n={host:t,name:ad_name,ver:getBuildVersion(),exchange:ad_exchange},i=new XMLHttpRequest;i.open("POST",e,!0),i.setRequestHeader("Content-Type","application/json; charset=UTF-8"),i.onreadystatechange=function(){if(4===i.readyState&&200===i.status){var e=0!==JSON.parse(i.responseText).success;this.bouncer(e)}}.bind(this),i.send(JSON.stringify(n))}}},this.bouncer=function(e){e||this.haltExperience()},this.haltExperience=function(){ad_state="";var e=document.getElementById("ad_header"),t=document.getElementById("splash");e&&(e.hidden=!0),t&&(t.hidden=!0);var a=document.createElement("div");a.id="unavailable",a.innerHTML="Sorry, this ad is no longer available...",document.body.appendChild(a),this.teardownGame()},this.teardownGame=function(){if("undefined"!=typeof window.Phaser&&"undefined"!=typeof window.Phaser.GAMES[0]){var e=window.Phaser.GAMES[0];e.load.isLoading?e.load.reset():e.destroy()}else setTimeout(this.teardownGame.bind(this),100)},this.ring()},Analytics.prototype._sendProfile=function(e){if(this.enabled_profile_enhance&&"localhost"!==document.location.hostname&&"127.0.0.1"!==document.location.hostname){e.device_id=getDeviceId(),e.app_id=this.time_series_data&&this.time_series_data.aai?this.time_series_data.aai:null,console.log(JSON.stringify(e));var t=new XMLHttpRequest,a="https://creative-analytics.crossinstall.io/profile";t.open("POST",a),t.setRequestHeader("Content-Type","text/plain"),t.send(JSON.stringify(e))}},Analytics.prototype.logFacebookEvent=function(e,t,a){if("facebook"===this.sdk_enabled&&("undefined"==typeof t&&(t=""),"undefined"==typeof a&&(a=""),t=t.toString(),a=a.toString(),"facebook"===ad_exchange&&"undefined"!=typeof FbPlayableAd)){console.log("%c[facebook-sdk] %s","background:#4267b2;color:white",e+" ==> "+t+" | "+a);try{switch(e){case"logButtonClick":FbPlayableAd.logButtonClick(t+"|"+a,0,0);break;case"logLevelComplete":FbPlayableAd.logLevelComplete(t+"|"+a);break;case"logGameLoad":FbPlayableAd.logGameLoad();break;case"logEndCardShowUp":FbPlayableAd.logEndCardShowUp();break;default:FbPlayableAd.logButtonClick(t+"|"+a,0,0)}}catch(n){console.log("%c[facebook-sdk] %s","background:#4267b2;color:white","Error calling:"+e)}}};var analytics=new Analytics;if(console.log("wrapper - start"),"undefined"==typeof analytics||noReporting()){var StubAnalytics=function(){};StubAnalytics.prototype.init=function(){},StubAnalytics.prototype.logEvent=function(){},StubAnalytics.prototype.logProgress=function(){},StubAnalytics.prototype.logTime=function(){},StubAnalytics.prototype.logClick=function(){},StubAnalytics.prototype.logDev=function(){},StubAnalytics.prototype.logError=function(){},StubAnalytics.prototype.countEvent=function(){},StubAnalytics.prototype.markViewable=function(){},StubAnalytics.prototype.markAppStart=function(){},StubAnalytics.prototype.markCTA=function(){},StubAnalytics.prototype.markTime=function(){},StubAnalytics.prototype.doorbell=function(){},StubAnalytics.prototype.setSampleRate=function(){},StubAnalytics.prototype.profileEnhanceInteraction=function(){};var analytics=new StubAnalytics}if("undefined"==typeof window.CI_API&&(window.CI_API={states:{preloader:{},game:{}},PreloaderState:{},GameState:{},FontLoader:{},LU:{},CTA:{},Globals:{},renderer:1}),"undefined"==typeof soundLoader){var StubSoundLoader=function(){};StubSoundLoader.prototype.disableWebAudio=function(){};var soundLoader=new StubSoundLoader}analytics.init("undefined"!=typeof ad_analytics_sample_rate?ad_analytics_sample_rate:5),genlog("wrapper");var wrapper_repo="v2",ad_state=null,time_wrapper_start=(new Date).getTime(),time_mraid_ready=null,time_mraid_viewable=null,time_app_preload_complete=null,time_app_start=null,close_button_time_remaining=null,close_button_showing=!1,close_button_timeout_id=null,no_mraid_partners=["vungle","tapjoy","facebook","snapchat","nomraid","adwords","ironsource_nonrtb"],advertisingLabels={CN:"广告"},ageRatingImages={"0+":"age0.png","6+":"age6.png","12+":"age12.png","16+":"age16.png","18+":"age18.png"},title_pad_left=0,title_pad_right=0,body_width=960,body_height=640,isSplashHidden=!1,calculatedPaddingTop=0,calculatedPaddingBottom=0,calculatedPaddingLeft=0,ad_notch_sides=!1,ad_notch_top=!1,ad_notch_bottom=!1;"undefined"==typeof ad_expandable&&(ad_expandable=!1),"undefined"==typeof ad_close_position&&(ad_close_position="right"),"undefined"==typeof ad_close_countdown&&(ad_close_countdown=!0),"undefined"!=typeof ad_hide_header&&""!==ad_hide_header||(ad_hide_header=!1),"undefined"!=typeof ad_hide_loading_text&&""!==ad_hide_loading_text||(ad_hide_loading_text=!1),"undefined"!=typeof ad_advertising_label_lang&&"%LABEL_LANG%"!==ad_advertising_label_lang||(ad_advertising_label_lang=""),"undefined"!=typeof ad_show_age_ratings&&"%AGE_RATING%"!==ad_show_age_ratings||(ad_show_age_ratings=""),"undefined"!=typeof ad_tracking_pixels&&"%IMPRESSION_TRACKERS%"!==ad_tracking_pixels||(ad_tracking_pixels=[]),"undefined"!=typeof ad_geo_country&&"%COUNTRY%"!==ad_geo_country||(ad_geo_country="");var query_params=null;if(query_params="undefined"==typeof dev_params?{}:dev_params,location.search.substr(1).split("&").forEach(function(e){query_params[e.split("=")[0]]=decodeURIComponent(e.split("=")[1])}),"facebook"===ad_exchange&&soundLoader.disableWebAudio(),"ironsource"===ad_exchange)window.onload=function(){mraid&&"loading"===mraid.getState()?mraid.addEventListener("ready",setupIS):setupIS()};else if("adex"===ad_exchange){var frameEl=window.frameElement;frameEl&&(frameEl.style.width=frameEl.style.height="100%",frameEl.style.position="absolute",frameEl.style.top=frameEl.style.left="0px",frameEl.style.margin="auto")}window.didsetupMraid=!1,window.adDidShowViewable=!1;var hadFirstInteraction=!1,hadSecondInteraction=!1,hadThirdInteraction=!1;localization.registerString("Mini game loading, please wait...",{en:"Mini game loading...",ar:"جاري تحميّل لعبة مُصغّرة، يُرجى الانتظار...",bg:"Мини-играта се зарежда, моля, изчакайте...",zh:"小游戏加载中，请稍等……",cs:"Probíhá načítání minihry, prosím čekejte...",da:"Mini spil loader, vent venligst...",nl:"Mini-game is aan het laden, even geduld...",fi:"Minipeliä ladataan; ole hyvä ja odota...",fr:"Chargement du mini-jeu, merci de patienter...",de:"Mini-Spiel wird geladen. Bitte warten ...",el:"Φόρτωση μίνι παιχνιδιού, παρακαλώ περιμένετε... ",he:"מיני-משחק טוען, אנא המתן...",hu:"Kérem várjon, a mini játék betöltése folyamatban...",id:"Memuat mini game, silakan tunggu...",it:"Mini gioco in caricamento, attendere prego...",ja:"ミニゲームを読み込んでいます。少しお待ちください...",ko:"미니게임 로딩 중, 기다려 주세요...",ms:"Permainan mini sedang dimuat turun, sila tunggu sebentar...",no:"Minispill laster, vennligst vent...",pl:"Zaczekaj, trwa wczytywanie minigry...",pt:"Minijogo carregando, aguarde…",ro:"Mini-jocul se încarcă, vă rugăm să așteptați...",ru:"Миниигра загружается, пожалуйста, подождите...",sr:"Mini igrica se učitava, molimo sačekajte...",sk:"Minihra sa načítava, čakajte prosím...",es:"Cargando minijuego, por favor espere...",sv:"Minispelet laddas, vänta...",tl:"Nagloload ang mini game, pakihintay...",th:"กำลังโหลดมินิเกม โปรดรอ...",tr:"Mini oyun yükleniyor, lütfen bekle...",uk:"Міні-гра завантажується, будь ласка, зачекайте...",vi:"Trò chơi đang tải, vui lòng chờ..."});var bgNumShadows=30,mraid_wrapper_handling_error=!1;window.onerror=function(e,t,a,n,i){if(!mraid_wrapper_handling_error){mraid_wrapper_handling_error=!0;var o=e+", url="+t+", line="+a;n&&(o+=", column="+n),i&&(o+=", error="+JSON.stringify(i)),log_remote("onerror",o),mraid_wrapper_handling_error=!1,analytics.logError(e),window.TJ_API&&window.TJ_API.error(o)}},console.log("wrapper - html writing...");var close_class_extra="";ad_close_position.length>4&&"-alt"==ad_close_position.substring(ad_close_position.length-4)&&(close_class_extra=" close-button-alt");var header_markup_left="",header_markup_right="",logo_pad=110;"none"==ad_close_position&&"adcolony"!==ad_exchange&&"adcolony_nonrtb"!==ad_exchange?(header_markup_left=ad_hide_header?"":'<div id="ad_header_logo" class="ad_header_logo_left" style="display:none"></div>',header_markup_right="",title_pad_left=logo_pad,title_pad_right="ironsource_nonrtb"===ad_exchange?25:title_pad_right):"left"==ad_close_position.substring(0,4)?(header_markup_left='<div id="close_timer" class="close_timer_left" style="display:none"></div><div id="close_zone" class="close_zone_left" style="display:none"><div class="close-button'+close_class_extra+'"></div></div>',header_markup_right=ad_hide_header?"":'<div id="ad_header_logo" class="ad_header_logo_right" style="display:none"></div>',title_pad_left=30,title_pad_right=logo_pad):(header_markup_left=ad_hide_header?"":'<div id="ad_header_logo" class="ad_header_logo_left" style="display:none"></div>',header_markup_right='<div id="close_timer" class="close_timer_right" style="display:none"></div><div id="close_zone" class="close_zone_right" style="display:none"><div class="close-button'+close_class_extra+'"></div></div>',title_pad_left=logo_pad,title_pad_right=30);var headerClass="";if("adcolony"!==ad_exchange&&"adcolony_nonrtb"!==ad_exchange||(headerClass='class="tall"'),"ironsource"===ad_exchange||"ironsource_nonrtb"===ad_exchange)var orientationMsg='style="width:100%; height:100%; position:absolute; z-index: 10000;"';else if("vungle"===ad_exchange)var orientationMsg='style="z-index: 2; left: 0px; top: 0px; position: absolute;"';else var orientationMsg="";if("vungle"===ad_exchange)var footerMsg='style="display:none;"';else var footerMsg="";var adHeaderStyle="";ad_hide_header&&"none"===ad_close_position?adHeaderStyle='style="display:none"':ad_hide_header&&(adHeaderStyle='style="background:none;border:0;"');var header_markup_title=ad_hide_header?"":'<div id="ad_title" class="ad_title">'+ad_title+getAdvertisingLabel()+getAgeRatingMarkup()+"</div>",fullscreen_html='<div id="ad_header" '+adHeaderStyle+" "+headerClass+">"+header_markup_left+header_markup_title+header_markup_right+'</div><div id="orientation" '+orientationMsg+' class="orientation"></div><script type="text/javascript">document.getElementById("orientation").ontouchstart = function() {return false;}</script>',loadingText=ad_hide_loading_text?"":localization.get("Mini game loading, please wait...");ad_has_custom_load_screen||query_params.noimp||(fullscreen_html+='<div id="splash"><div id="splash_icon_wrap"><a href="'+ad_click_dest+'&sub12=splash"><img src="'+imageLoader.getIcon()+'" id="splash_icon"/></a></div><div id="splash_wait" lang="'+localization.getLanguage()+'">'+loadingText+'</div><div id="splash_loading"><div id="splash_loading_bar"></div><div id="splash_loading_bar_full"></div></div><div id="splash_footer"><div id="splash_footer_logo"'+footerMsg+"></div></div></div>"),ad_expandable?document.write('<div id="ad_banner"><img src="'+ad_expandable_banner+'" width="'+ad_expandable_banner_width+'" height="'+ad_expandable_banner_height+'" onclick="javascript:wrapper_expand();"></img></div><div id="ad_expanded" style="display:none">'+fullscreen_html+"</div>"):document.write(fullscreen_html),console.log("wrapper - html written"),window.CI_API.skipAd=function(){try{if(!Utils.params.cta_on_idle_time)throw"cta_on_idle_time doesn't exist in params!";var e=Utils.params.cta_on_idle_time;Utils.params.cta_on_idle_time=200,analytics.logProgress("CI_API","ad_skipped"),window.requestAnimationFrame(function(t){Utils.params.cta_on_idle_time=e})}catch(t){console.warn("Could not skip ad! | "+t)}};var TJ_CI_API={skipAd:CI_API.skipAd};window.TJ_API&&window.TJ_API.setPlayableAPI?window.TJ_API.setPlayableAPI(TJ_CI_API):window.onkeyup=function(e){"Escape"===e.code&&CI_API&&CI_API.skipAd()},isMraid()?"ready"!==mraid.getState()&&"adcolony"!==ad_exchange&&"adcolony_nonrtb"!==ad_exchange?(console.log("MRAID Ad: adding event listener for ready"),mraid.addEventListener("ready",function(){setupMraid("ready")})):(console.log("MRAID default ready"),setupMraid("default")):"ironsource_nonrtb"!==ad_exchange&&showAd("dev_nomraid"),fitTitle(),console.log("wrapper - end"),document.addEventListener("readystatechange",function e(){"complete"===document.readyState&&(window.frame=document.getElementById("creativeFrame"),window.frame.onload=scriptLoaded,window.frame.setAttribute("src",client_html),document.removeEventListener("readystatechange",e))});var loaded=!1;scriptLoaded=function(){loaded||(loaded=!0,ad_begin())};var _clicked=!1;window.addEventListener("message",function(e){if("click_go"!==e.data)throw e.data;_clicked||(_clicked=!0,setTimeout(_allowAnotherClick,500),wrapper_click_go())},!0),_allowAnotherClick=function(){_clicked=!1},ad_begin=function(){wrapper_load_progress(100),wrapper_preload_complete(),loaded&&"ready"===ad_state&&(console.log("resource loaded | ad ready"),wrapper_hide_splash())};